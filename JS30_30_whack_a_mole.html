<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Whack A Mole!</title>
    <link
      href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700"
      rel="stylesheet"
      type="text/css"
    />
    <style>
      html {
        font-family: sans-serif;
      }
      .game {
        display: grid;
        margin-left: auto;
        margin-right: auto;
        grid-template-columns: repeat(3, 1fr);
        max-width: 800px;
        grid-gap: 50px;
      }
      .hole {
        width: 200px;
        height: 200px;
        background-color: gray;
        border-radius: 50%;
      }
      .mole {
        background-image: url(./MoleImg.png);
        background-size: contain;
        background-repeat: no-repeat;
        width: 140px;
        height: 140px;
        margin: auto;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Whack-a-mole! - score: <span class="score">0</span></h1>
    <button onClick="startGame()">Start!</button>

    <div class="game">
      <div class="hole hole1">
        <div class="mole"></div>
      </div>
      <div class="hole hole2">
        <div class="mole"></div>
      </div>
      <div class="hole hole3">
        <div class="mole"></div>
      </div>
      <div class="hole hole4">
        <div class="mole"></div>
      </div>
      <div class="hole hole5">
        <div class="mole"></div>
      </div>
      <div class="hole hole6">
        <div class="mole"></div>
      </div>
    </div>

    <script>
      const holes = document.querySelectorAll(".hole");
      const scoreBoard = document.querySelector(".score");
      const moles = document.querySelectorAll(".mole");

      let started = false;

      function setTimeoutIndefinite(mole) {
        setTimeout(() => {
          mole.style.display = "none";
          console.log("hiding it");
          setTimeout(() => {
            if (started) {
              mole.style.display = "block";
            }
            setTimeoutIndefinite(mole);
          }, Math.random() * 5000 + 500);
        }, Math.random() * 1000 + 200);
      }

      moles.forEach((mole) => {
        mole.style.display = "none";
        setTimeoutIndefinite(mole);
        mole.addEventListener("click", () => {
          scoreBoard.textContent = +scoreBoard.textContent + 1;
        });
      });

      function startGame() {
        scoreBoard.textContent = 0;

        started = true;
      }
    </script>
  </body>
</html>
